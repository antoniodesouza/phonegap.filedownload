<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="width=400, user-scalable=no">
        
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>PhoneGap filedownload</title>
        
        
		<script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
        <script>
        
         
			function onBodyLoad()
			{
				document.addEventListener("deviceready", onDeviceReady, false);
			}
 
			function downloadFile(){
				
				var fileTransfer = new FileTransfer();
				var uri = encodeURI("http://www.pa.senac.br/sites/default/files/ascom/Modelos_de_curriculo.pdf");
				var fileURL = "file:///data/data/br.com.antoniodesouza.phonegap.filedownload/arquivo.pdf";
				fileTransfer.download(
				    uri,
				    fileURL,
				    function(entry) {
				        console.log("download complete: " + entry.toURL());
				        showLink(entry.toURI());
				        
				        
				    },
				    function(error) {
				        console.log("download error source " + error.source);
				        console.log("download error target " + error.target);
				        console.log("upload error code" + error.code);
				    },
				    false,
				    {
				        headers: {
				            "Authorization": "Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="
				        }
				    }
				);
				
				
 
			}
 
			function showLink(url){
				alert(url);
				var divEl = document.getElementById("ready");
				var aElem = document.createElement("a");
				aElem.setAttribute("target", "_blank");
				aElem.setAttribute("href", url);
				aElem.appendChild(document.createTextNode("Ready! Click To Open."))
				divEl.appendChild(aElem);
 
			}
 
 
			function fail(evt) {
				console.log(evt.target.error.code);
			}
 
			function onDeviceReady()
			{
				downloadFile();
			}
 
        
        
        </script>
        
    </head>
    <body onload="onBodyLoad()">
        <div class="app">
            <h1>Apache Cordova</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
            </div>
        </div>

        
        
		<p>
			DOWNLOADING FILE...<br />
			<span id="ready"></span>
		</p>
        
    </body>
</html>
